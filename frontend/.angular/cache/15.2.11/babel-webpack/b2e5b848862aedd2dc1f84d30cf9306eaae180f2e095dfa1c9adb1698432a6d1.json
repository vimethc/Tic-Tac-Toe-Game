{"ast":null,"code":"import { io } from 'socket.io-client';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/common\";\nfunction GameComponent_div_4_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r5 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"div\", 7);\n    i0.ɵɵlistener(\"click\", function GameComponent_div_4_Template_div_click_0_listener() {\n      const restoredCtx = i0.ɵɵrestoreView(_r5);\n      const i_r3 = restoredCtx.index;\n      const ctx_r4 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r4.makeMove(i_r3));\n    });\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const cell_r2 = ctx.$implicit;\n    i0.ɵɵclassProp(\"x\", cell_r2 === \"X\")(\"o\", cell_r2 === \"O\");\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\" \", cell_r2, \" \");\n  }\n}\nfunction GameComponent_button_10_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r7 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"button\", 8);\n    i0.ɵɵlistener(\"click\", function GameComponent_button_10_Template_button_click_0_listener() {\n      i0.ɵɵrestoreView(_r7);\n      const ctx_r6 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r6.reconnect());\n    });\n    i0.ɵɵtext(1, \"Reconnect\");\n    i0.ɵɵelementEnd();\n  }\n}\nexport class GameComponent {\n  constructor() {\n    this.socket = null;\n    this.board = Array(9).fill(null);\n    this.currentTurn = 'X';\n    this.status = 'Game in progress';\n    this.gameId = 'default-game';\n    this.player = 'X';\n    this.hasError = false;\n    this.connectSocket();\n  }\n  connectSocket() {\n    try {\n      console.log('Attempting to connect to socket server...');\n      this.socket = io('http://localhost:3000', {\n        transports: ['websocket'],\n        upgrade: false,\n        reconnectionAttempts: 5,\n        reconnectionDelay: 1000\n      });\n      this.setupSocketListeners();\n    } catch (error) {\n      console.error('Socket connection error:', error);\n      this.handleConnectionError();\n    }\n  }\n  setupSocketListeners() {\n    if (!this.socket) return;\n    this.socket.on('connect', () => {\n      console.log('Connected to socket server');\n      this.hasError = false;\n      this.status = 'Game in progress';\n      this.joinGame();\n    });\n    this.socket.on('connect_error', error => {\n      console.error('Socket connection error:', error);\n      this.handleConnectionError();\n    });\n    this.socket.on('gameState', gameState => {\n      console.log('Received game state:', gameState);\n      this.board = gameState.board;\n      this.currentTurn = gameState.currentTurn;\n    });\n    this.socket.on('gameOver', data => {\n      console.log('Game over:', data);\n      this.status = data.winner ? `Player ${data.winner} wins!` : 'Game is a draw!';\n    });\n    this.socket.on('disconnect', () => {\n      console.log('Disconnected from socket server');\n      this.handleConnectionError();\n    });\n  }\n  handleConnectionError() {\n    this.hasError = true;\n    this.status = 'Connection error. Please check if the server is running.';\n  }\n  ngOnInit() {\n    // Connection is handled in constructor\n  }\n  ngOnDestroy() {\n    if (this.socket) {\n      this.socket.disconnect();\n    }\n  }\n  makeMove(index) {\n    if (!this.socket || this.hasError) {\n      console.log('Cannot make move - no connection');\n      return;\n    }\n    console.log('Attempting move at index:', index);\n    if (this.board[index] || this.currentTurn !== this.player) {\n      console.log('Invalid move - cell taken or not your turn');\n      return;\n    }\n    this.socket.emit('makeMove', {\n      gameId: this.gameId,\n      index: index,\n      player: this.player\n    });\n  }\n  newGame() {\n    this.board = Array(9).fill(null);\n    this.currentTurn = 'X';\n    this.status = 'Game in progress';\n    this.joinGame();\n  }\n  reconnect() {\n    if (this.socket) {\n      this.socket.disconnect();\n    }\n    this.connectSocket();\n  }\n  joinGame() {\n    if (!this.socket || this.hasError) return;\n    console.log('Joining game:', this.gameId);\n    this.socket.emit('joinGame', {\n      gameId: this.gameId,\n      player: this.player\n    });\n  }\n}\nGameComponent.ɵfac = function GameComponent_Factory(t) {\n  return new (t || GameComponent)();\n};\nGameComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n  type: GameComponent,\n  selectors: [[\"app-game\"]],\n  decls: 11,\n  vars: 6,\n  consts: [[1, \"game-container\"], [1, \"status\"], [1, \"board\"], [\"class\", \"cell\", 3, \"x\", \"o\", \"click\", 4, \"ngFor\", \"ngForOf\"], [1, \"info\"], [3, \"click\"], [\"class\", \"reconnect\", 3, \"click\", 4, \"ngIf\"], [1, \"cell\", 3, \"click\"], [1, \"reconnect\", 3, \"click\"]],\n  template: function GameComponent_Template(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵelementStart(0, \"div\", 0)(1, \"div\", 1);\n      i0.ɵɵtext(2);\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(3, \"div\", 2);\n      i0.ɵɵtemplate(4, GameComponent_div_4_Template, 2, 5, \"div\", 3);\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(5, \"div\", 4)(6, \"p\");\n      i0.ɵɵtext(7);\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(8, \"button\", 5);\n      i0.ɵɵlistener(\"click\", function GameComponent_Template_button_click_8_listener() {\n        return ctx.newGame();\n      });\n      i0.ɵɵtext(9, \"New Game\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵtemplate(10, GameComponent_button_10_Template, 2, 0, \"button\", 6);\n      i0.ɵɵelementEnd()();\n    }\n    if (rf & 2) {\n      i0.ɵɵadvance(1);\n      i0.ɵɵclassProp(\"error\", ctx.hasError);\n      i0.ɵɵadvance(1);\n      i0.ɵɵtextInterpolate(ctx.status);\n      i0.ɵɵadvance(2);\n      i0.ɵɵproperty(\"ngForOf\", ctx.board);\n      i0.ɵɵadvance(3);\n      i0.ɵɵtextInterpolate1(\"Current Turn: \", ctx.currentTurn, \"\");\n      i0.ɵɵadvance(3);\n      i0.ɵɵproperty(\"ngIf\", ctx.hasError);\n    }\n  },\n  dependencies: [i1.NgForOf, i1.NgIf],\n  styles: [\".game-container[_ngcontent-%COMP%] {\\n      display: flex;\\n      flex-direction: column;\\n      align-items: center;\\n      margin: 20px;\\n    }\\n    .board[_ngcontent-%COMP%] {\\n      display: grid;\\n      grid-template-columns: repeat(3, 1fr);\\n      gap: 5px;\\n      background: #34495e;\\n      padding: 10px;\\n      border-radius: 10px;\\n      width: 300px;\\n      height: 300px;\\n    }\\n    .cell[_ngcontent-%COMP%] {\\n      width: 100%;\\n      height: 100%;\\n      background: #fff;\\n      display: flex;\\n      align-items: center;\\n      justify-content: center;\\n      font-size: 40px;\\n      font-weight: bold;\\n      cursor: pointer;\\n      border-radius: 5px;\\n      transition: all 0.3s ease;\\n    }\\n    .cell[_ngcontent-%COMP%]:hover {\\n      background: #f0f0f0;\\n      transform: scale(0.98);\\n    }\\n    .cell.x[_ngcontent-%COMP%] {\\n      color: #e74c3c;\\n    }\\n    .cell.o[_ngcontent-%COMP%] {\\n      color: #3498db;\\n    }\\n    .status[_ngcontent-%COMP%] {\\n      margin-bottom: 20px;\\n      font-size: 24px;\\n      font-weight: bold;\\n      color: #2c3e50;\\n    }\\n    .status.error[_ngcontent-%COMP%] {\\n      color: #e74c3c;\\n    }\\n    .info[_ngcontent-%COMP%] {\\n      margin-top: 20px;\\n      text-align: center;\\n    }\\n    button[_ngcontent-%COMP%] {\\n      padding: 10px 20px;\\n      font-size: 16px;\\n      background: #2ecc71;\\n      color: white;\\n      border: none;\\n      border-radius: 5px;\\n      cursor: pointer;\\n      transition: background-color 0.3s;\\n      margin: 0 5px;\\n    }\\n    button[_ngcontent-%COMP%]:hover {\\n      background: #27ae60;\\n    }\\n    .reconnect[_ngcontent-%COMP%] {\\n      background: #e74c3c;\\n    }\\n    .reconnect[_ngcontent-%COMP%]:hover {\\n      background: #c0392b;\\n    }\\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8uL3NyYy9hcHAvZ2FtZS9nYW1lLmNvbXBvbmVudC50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiO0lBQ0k7TUFDRSxhQUFhO01BQ2Isc0JBQXNCO01BQ3RCLG1CQUFtQjtNQUNuQixZQUFZO0lBQ2Q7SUFDQTtNQUNFLGFBQWE7TUFDYixxQ0FBcUM7TUFDckMsUUFBUTtNQUNSLG1CQUFtQjtNQUNuQixhQUFhO01BQ2IsbUJBQW1CO01BQ25CLFlBQVk7TUFDWixhQUFhO0lBQ2Y7SUFDQTtNQUNFLFdBQVc7TUFDWCxZQUFZO01BQ1osZ0JBQWdCO01BQ2hCLGFBQWE7TUFDYixtQkFBbUI7TUFDbkIsdUJBQXVCO01BQ3ZCLGVBQWU7TUFDZixpQkFBaUI7TUFDakIsZUFBZTtNQUNmLGtCQUFrQjtNQUNsQix5QkFBeUI7SUFDM0I7SUFDQTtNQUNFLG1CQUFtQjtNQUNuQixzQkFBc0I7SUFDeEI7SUFDQTtNQUNFLGNBQWM7SUFDaEI7SUFDQTtNQUNFLGNBQWM7SUFDaEI7SUFDQTtNQUNFLG1CQUFtQjtNQUNuQixlQUFlO01BQ2YsaUJBQWlCO01BQ2pCLGNBQWM7SUFDaEI7SUFDQTtNQUNFLGNBQWM7SUFDaEI7SUFDQTtNQUNFLGdCQUFnQjtNQUNoQixrQkFBa0I7SUFDcEI7SUFDQTtNQUNFLGtCQUFrQjtNQUNsQixlQUFlO01BQ2YsbUJBQW1CO01BQ25CLFlBQVk7TUFDWixZQUFZO01BQ1osa0JBQWtCO01BQ2xCLGVBQWU7TUFDZixpQ0FBaUM7TUFDakMsYUFBYTtJQUNmO0lBQ0E7TUFDRSxtQkFBbUI7SUFDckI7SUFDQTtNQUNFLG1CQUFtQjtJQUNyQjtJQUNBO01BQ0UsbUJBQW1CO0lBQ3JCIiwic291cmNlc0NvbnRlbnQiOlsiXG4gICAgLmdhbWUtY29udGFpbmVyIHtcbiAgICAgIGRpc3BsYXk6IGZsZXg7XG4gICAgICBmbGV4LWRpcmVjdGlvbjogY29sdW1uO1xuICAgICAgYWxpZ24taXRlbXM6IGNlbnRlcjtcbiAgICAgIG1hcmdpbjogMjBweDtcbiAgICB9XG4gICAgLmJvYXJkIHtcbiAgICAgIGRpc3BsYXk6IGdyaWQ7XG4gICAgICBncmlkLXRlbXBsYXRlLWNvbHVtbnM6IHJlcGVhdCgzLCAxZnIpO1xuICAgICAgZ2FwOiA1cHg7XG4gICAgICBiYWNrZ3JvdW5kOiAjMzQ0OTVlO1xuICAgICAgcGFkZGluZzogMTBweDtcbiAgICAgIGJvcmRlci1yYWRpdXM6IDEwcHg7XG4gICAgICB3aWR0aDogMzAwcHg7XG4gICAgICBoZWlnaHQ6IDMwMHB4O1xuICAgIH1cbiAgICAuY2VsbCB7XG4gICAgICB3aWR0aDogMTAwJTtcbiAgICAgIGhlaWdodDogMTAwJTtcbiAgICAgIGJhY2tncm91bmQ6ICNmZmY7XG4gICAgICBkaXNwbGF5OiBmbGV4O1xuICAgICAgYWxpZ24taXRlbXM6IGNlbnRlcjtcbiAgICAgIGp1c3RpZnktY29udGVudDogY2VudGVyO1xuICAgICAgZm9udC1zaXplOiA0MHB4O1xuICAgICAgZm9udC13ZWlnaHQ6IGJvbGQ7XG4gICAgICBjdXJzb3I6IHBvaW50ZXI7XG4gICAgICBib3JkZXItcmFkaXVzOiA1cHg7XG4gICAgICB0cmFuc2l0aW9uOiBhbGwgMC4zcyBlYXNlO1xuICAgIH1cbiAgICAuY2VsbDpob3ZlciB7XG4gICAgICBiYWNrZ3JvdW5kOiAjZjBmMGYwO1xuICAgICAgdHJhbnNmb3JtOiBzY2FsZSgwLjk4KTtcbiAgICB9XG4gICAgLmNlbGwueCB7XG4gICAgICBjb2xvcjogI2U3NGMzYztcbiAgICB9XG4gICAgLmNlbGwubyB7XG4gICAgICBjb2xvcjogIzM0OThkYjtcbiAgICB9XG4gICAgLnN0YXR1cyB7XG4gICAgICBtYXJnaW4tYm90dG9tOiAyMHB4O1xuICAgICAgZm9udC1zaXplOiAyNHB4O1xuICAgICAgZm9udC13ZWlnaHQ6IGJvbGQ7XG4gICAgICBjb2xvcjogIzJjM2U1MDtcbiAgICB9XG4gICAgLnN0YXR1cy5lcnJvciB7XG4gICAgICBjb2xvcjogI2U3NGMzYztcbiAgICB9XG4gICAgLmluZm8ge1xuICAgICAgbWFyZ2luLXRvcDogMjBweDtcbiAgICAgIHRleHQtYWxpZ246IGNlbnRlcjtcbiAgICB9XG4gICAgYnV0dG9uIHtcbiAgICAgIHBhZGRpbmc6IDEwcHggMjBweDtcbiAgICAgIGZvbnQtc2l6ZTogMTZweDtcbiAgICAgIGJhY2tncm91bmQ6ICMyZWNjNzE7XG4gICAgICBjb2xvcjogd2hpdGU7XG4gICAgICBib3JkZXI6IG5vbmU7XG4gICAgICBib3JkZXItcmFkaXVzOiA1cHg7XG4gICAgICBjdXJzb3I6IHBvaW50ZXI7XG4gICAgICB0cmFuc2l0aW9uOiBiYWNrZ3JvdW5kLWNvbG9yIDAuM3M7XG4gICAgICBtYXJnaW46IDAgNXB4O1xuICAgIH1cbiAgICBidXR0b246aG92ZXIge1xuICAgICAgYmFja2dyb3VuZDogIzI3YWU2MDtcbiAgICB9XG4gICAgLnJlY29ubmVjdCB7XG4gICAgICBiYWNrZ3JvdW5kOiAjZTc0YzNjO1xuICAgIH1cbiAgICAucmVjb25uZWN0OmhvdmVyIHtcbiAgICAgIGJhY2tncm91bmQ6ICNjMDM5MmI7XG4gICAgfVxuICAiXSwic291cmNlUm9vdCI6IiJ9 */\"]\n});","map":{"version":3,"mappings":"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","names":["io","i0","GameComponent","constructor","Array","fill","connectSocket","console","log","socket","transports","upgrade","reconnectionAttempts","reconnectionDelay","setupSocketListeners","error","handleConnectionError","on","hasError","status","joinGame","gameState","board","currentTurn","data","winner","ngOnInit","ngOnDestroy","disconnect","makeMove","index","player","emit","gameId","newGame","reconnect","selectors","decls","vars","consts","template","ctx"],"sourceRoot":"","sources":["/Users/chamma/Desktop/tic-tac-toe-game/frontend/src/app/game/game.component.ts"],"sourcesContent":["import { Component, OnInit, OnDestroy } from '@angular/core';\nimport { io, Socket } from 'socket.io-client';\n\n@Component({\n  selector: 'app-game',\n  template: `\n    <div class=\"game-container\">\n      <div class=\"status\" [class.error]=\"hasError\">{{ status }}</div>\n      <div class=\"board\">\n        <div *ngFor=\"let cell of board; let i = index\" \n             class=\"cell\"\n             [class.x]=\"cell === 'X'\"\n             [class.o]=\"cell === 'O'\"\n             (click)=\"makeMove(i)\">\n          {{ cell }}\n        </div>\n      </div>\n      <div class=\"info\">\n        <p>Current Turn: {{ currentTurn }}</p>\n        <button (click)=\"newGame()\">New Game</button>\n        <button *ngIf=\"hasError\" (click)=\"reconnect()\" class=\"reconnect\">Reconnect</button>\n      </div>\n    </div>\n  `,\n  styles: [`\n    .game-container {\n      display: flex;\n      flex-direction: column;\n      align-items: center;\n      margin: 20px;\n    }\n    .board {\n      display: grid;\n      grid-template-columns: repeat(3, 1fr);\n      gap: 5px;\n      background: #34495e;\n      padding: 10px;\n      border-radius: 10px;\n      width: 300px;\n      height: 300px;\n    }\n    .cell {\n      width: 100%;\n      height: 100%;\n      background: #fff;\n      display: flex;\n      align-items: center;\n      justify-content: center;\n      font-size: 40px;\n      font-weight: bold;\n      cursor: pointer;\n      border-radius: 5px;\n      transition: all 0.3s ease;\n    }\n    .cell:hover {\n      background: #f0f0f0;\n      transform: scale(0.98);\n    }\n    .cell.x {\n      color: #e74c3c;\n    }\n    .cell.o {\n      color: #3498db;\n    }\n    .status {\n      margin-bottom: 20px;\n      font-size: 24px;\n      font-weight: bold;\n      color: #2c3e50;\n    }\n    .status.error {\n      color: #e74c3c;\n    }\n    .info {\n      margin-top: 20px;\n      text-align: center;\n    }\n    button {\n      padding: 10px 20px;\n      font-size: 16px;\n      background: #2ecc71;\n      color: white;\n      border: none;\n      border-radius: 5px;\n      cursor: pointer;\n      transition: background-color 0.3s;\n      margin: 0 5px;\n    }\n    button:hover {\n      background: #27ae60;\n    }\n    .reconnect {\n      background: #e74c3c;\n    }\n    .reconnect:hover {\n      background: #c0392b;\n    }\n  `]\n})\nexport class GameComponent implements OnInit, OnDestroy {\n  private socket: Socket | null = null;\n  board: string[] = Array(9).fill(null);\n  currentTurn: string = 'X';\n  status: string = 'Game in progress';\n  gameId: string = 'default-game';\n  player: string = 'X';\n  hasError: boolean = false;\n\n  constructor() {\n    this.connectSocket();\n  }\n\n  private connectSocket() {\n    try {\n      console.log('Attempting to connect to socket server...');\n      this.socket = io('http://localhost:3000', {\n        transports: ['websocket'],\n        upgrade: false,\n        reconnectionAttempts: 5,\n        reconnectionDelay: 1000\n      });\n\n      this.setupSocketListeners();\n    } catch (error) {\n      console.error('Socket connection error:', error);\n      this.handleConnectionError();\n    }\n  }\n\n  private setupSocketListeners() {\n    if (!this.socket) return;\n\n    this.socket.on('connect', () => {\n      console.log('Connected to socket server');\n      this.hasError = false;\n      this.status = 'Game in progress';\n      this.joinGame();\n    });\n\n    this.socket.on('connect_error', (error) => {\n      console.error('Socket connection error:', error);\n      this.handleConnectionError();\n    });\n\n    this.socket.on('gameState', (gameState: any) => {\n      console.log('Received game state:', gameState);\n      this.board = gameState.board;\n      this.currentTurn = gameState.currentTurn;\n    });\n\n    this.socket.on('gameOver', (data: any) => {\n      console.log('Game over:', data);\n      this.status = data.winner ? `Player ${data.winner} wins!` : 'Game is a draw!';\n    });\n\n    this.socket.on('disconnect', () => {\n      console.log('Disconnected from socket server');\n      this.handleConnectionError();\n    });\n  }\n\n  private handleConnectionError() {\n    this.hasError = true;\n    this.status = 'Connection error. Please check if the server is running.';\n  }\n\n  ngOnInit() {\n    // Connection is handled in constructor\n  }\n\n  ngOnDestroy() {\n    if (this.socket) {\n      this.socket.disconnect();\n    }\n  }\n\n  makeMove(index: number) {\n    if (!this.socket || this.hasError) {\n      console.log('Cannot make move - no connection');\n      return;\n    }\n\n    console.log('Attempting move at index:', index);\n    if (this.board[index] || this.currentTurn !== this.player) {\n      console.log('Invalid move - cell taken or not your turn');\n      return;\n    }\n\n    this.socket.emit('makeMove', {\n      gameId: this.gameId,\n      index: index,\n      player: this.player\n    });\n  }\n\n  newGame() {\n    this.board = Array(9).fill(null);\n    this.currentTurn = 'X';\n    this.status = 'Game in progress';\n    this.joinGame();\n  }\n\n  reconnect() {\n    if (this.socket) {\n      this.socket.disconnect();\n    }\n    this.connectSocket();\n  }\n\n  private joinGame() {\n    if (!this.socket || this.hasError) return;\n    \n    console.log('Joining game:', this.gameId);\n    this.socket.emit('joinGame', { \n      gameId: this.gameId, \n      player: this.player \n    });\n  }\n} "]},"metadata":{},"sourceType":"module","externalDependencies":[]}